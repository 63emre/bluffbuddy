# ==========================================================
# BLUFFBUDDY ONLINE - ENVIRONMENT CONFIGURATION
# ==========================================================
# Copy this file to `.env.local` for development
# 
# @owner DEV1 (Infrastructure)
# @version v0.2.0
# 
# USAGE:
#   cp .env.example .env.local
#   # Edit .env.local with your values
#   docker-compose up -d
#
# NEVER commit .env.local to version control!
# ==========================================================

# ============================================
# APPLICATION
# ============================================
NODE_ENV=development
PORT=3000
API_PREFIX=api
CORS_ORIGINS=http://localhost:3000,http://localhost:8080
DEBUG=true

# ============================================
# REDIS
# ============================================
# Option 1: Full URL (takes precedence)
# REDIS_URL=redis://localhost:6379/0

# Option 2: Individual settings (used by Docker)
REDIS_HOST=redis
REDIS_PORT=6379
# REDIS_PASSWORD=your_password_here
REDIS_DB=0
REDIS_KEY_PREFIX=bb:
REDIS_CONNECT_TIMEOUT=10000
REDIS_COMMAND_TIMEOUT=5000
# REDIS_TLS=false

# ============================================
# FIREBASE (Choose one method)
# ============================================
# Method 1: Environment variables
FIREBASE_PROJECT_ID=your-project-id
FIREBASE_CLIENT_EMAIL=firebase-adminsdk-xxxxx@your-project-id.iam.gserviceaccount.com
# Note: Private key can be base64 encoded or raw PEM format
# FIREBASE_PRIVATE_KEY=base64_encoded_key_here

# Method 2: Service account file (recommended for local dev)
FIREBASE_SERVICE_ACCOUNT_PATH=./firebase-service-account.json

# Optional: Storage bucket
# FIREBASE_STORAGE_BUCKET=your-project-id.appspot.com

# ============================================
# GAME ENGINE
# ============================================
GAME_TURN_TIMEOUT=30
GAME_TARGET_SELECTION_TIMEOUT=10
GAME_RECONNECT_GRACE_PERIOD=120
GAME_MAX_PLAYERS=4
GAME_MIN_PLAYERS=2
GAME_CARDS_PER_DEAL=4
GAME_ROUNDS_PER_GAME=3
GAME_SEAL_THRESHOLD=4
GAME_ROUND_DELAY_MS=2000
GAME_DEAL_ANIMATION_DELAY_MS=500

# ============================================
# ELO RATING SYSTEM
# ============================================
ELO_INITIAL=1000
ELO_K_FACTOR=32
ELO_MIN=100
ELO_MAX=3000
ELO_PLACEMENT_GAMES=10

# ============================================
# WEBSOCKET (Socket.io)
# ============================================
WS_PORT=3001
WS_PATH=/socket.io
WS_PING_INTERVAL=25000
WS_PING_TIMEOUT=20000
WS_MAX_HTTP_BUFFER_SIZE=65536
WS_CONNECT_TIMEOUT=45000
WS_TRANSPORTS=websocket
WS_CORS_ORIGINS=http://localhost:3000,http://localhost:8080
WS_CORS_CREDENTIALS=true

# Connection state recovery (experimental)
WS_STATE_RECOVERY_ENABLED=false
WS_STATE_RECOVERY_DURATION=120000
WS_STATE_RECOVERY_SKIP_MIDDLEWARES=false

# Redis adapter for horizontal scaling
# Enable in production or when running multiple instances
WS_USE_REDIS_ADAPTER=false

# ============================================
# RATE LIMITING
# ============================================
THROTTLE_TTL=60
THROTTLE_LIMIT=100

# ============================================
# LOGGING
# ============================================
LOG_LEVEL=debug
LOG_PRETTY=true
